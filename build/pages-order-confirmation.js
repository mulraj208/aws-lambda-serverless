"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[570],{9506:(e,t,r)=>{r.d(t,{Z:()=>P});var n=r(9526),a=r(9653),o=r(2757),l=r(9458),s=r(5305),i=r(8018),c=r(4769),m=r(429),d=r(3717),u=r(8446),p=r(565),g=r(3411),f=r(8022);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const E=e=>{const{productItems:t,hasEditButton:r=!0,isDropdownOpen:a,dropdownText:o}=e,s=(0,l.Z)(),{isOpen:h,onToggle:E}=(0,i.q)(),y=t.map((({productId:e})=>e)).join(",")??"",{data:_}=(0,u.useProducts)({parameters:{ids:y,allImages:!0}},{enabled:Boolean(y)}),v=null==t?void 0:t.map((e=>{const t=null==_?void 0:_.data.find((t=>t.id===e.productId));return b(b(b({},e),t),{},{price:e.price})}));return(0,n.useEffect)((()=>{a&&E()}),[a]),n.createElement(n.Fragment,null,n.createElement(c.z,{colorScheme:"clear",justifyContent:"left",leftIcon:n.createElement(g.w7,null),p:0,rightIcon:h?n.createElement(g.Kh,null):n.createElement(g._M,null),onClick:E},o),n.createElement(m.U,{in:h},n.createElement(d.k,{alignItems:"center",direction:"column",gap:2},v?n.createElement(n.Fragment,null,v.map((e=>n.createElement(f.Z,{key:e.productId,product:e}))),r?n.createElement(c.z,{as:p.Link,colorScheme:"clear",fontSize:"sm",size:"sm",to:"/cart",variant:"link",w:"auto"},s.formatMessage({id:"order_summary.cart_items.link.edit_cart"})):null):null)))};var y=r(8562),_=r(7030),v=r(9289),x=r(7692),C=r(9382),O=r(4292),M=r(1293);const k=["amount","label","priceTextColor","styles"],S=e=>{const{amount:t,label:r,priceTextColor:a,styles:o}=e,s=(0,C.Z)(e,k),{currency:i}=(0,y.U8)(),c=(0,l.Z)(),m="number"==typeof t?c.formatNumber(t,{currency:i,style:"currency"}):t;return n.createElement(O.U,(0,x.Z)({justifyContent:"space-between"},s),r?n.createElement(M.x,o,r):null,n.createElement(M.x,(0,x.Z)({color:a},o),m))};var j,w=r(1996),I=r(9758);null===(j=w.Z.defaultProps)||void 0===j||j.variant;const Z=e=>{const{isEstimate:t,variant:r="main",hasPromoCodeForm:o=!1}=e,{hasFreeShipping:s,subtotal:i,shippingTotal:c,priceAdjustments:m,tax:d,total:u}=e.totals,p=(0,_.jC)("Totals",{variant:r}),g=(0,l.Z)(),f=g.formatMessage({id:"order_summary.tbd"}),h=s?g.formatMessage({id:"order_summary.label.free"}).toUpperCase():c||f,b=t?g.formatMessage({id:"order_summary.label.estimated_total"}):g.formatMessage({id:"order_summary.label.order_total"});return n.createElement(a.K,{__css:p.container},n.createElement(a.K,{__css:p.subtotalContainer},i?n.createElement(S,{amount:i,fontWeight:"bold",label:g.formatMessage({id:"checkout_confirmation.label.subtotal"}),styles:p.subtotal}):null,m&&m.length>0?m.map((e=>n.createElement(S,{amount:e.price?e.price:0,key:e.priceAdjustmentId,label:e.itemText,priceTextColor:"green.600",styles:p.adjustment}))):null,n.createElement(S,{amount:h,label:g.formatMessage({id:"order_summary.label.shipping"}),priceTextColor:s?"green.600":"gray.800",styles:p.shipping}),n.createElement(S,{amount:d||f,label:g.formatMessage({id:"checkout_confirmation.label.tax"}),styles:p.tax})),n.createElement(v.i,{mt:3}),o?n.createElement(n.Fragment,null,n.createElement(I.Z,null),n.createElement(v.i,{mb:4})):null,n.createElement(S,{amount:u,label:b,styles:p.total}))},P=e=>{const{order:t,isEstimate:r=!1,hasHeading:s=!0,hasEditCartButton:i=!0,hasPromoCodeForm:c=!1}=e,{data:m}=(0,y.Qg)(),d=(0,l.Z)();if(!m)return null;const u=(e=>{var t,r;const n=null===(t=e.shippingItems)||void 0===t?void 0:t[0],a=null==n||null===(r=n.priceAdjustments)||void 0===r?void 0:r.some((({appliedDiscount:e})=>"free"===(null==e?void 0:e.type)));return{priceAdjustments:e.orderPriceAdjustments,shippingTotal:e.shippingTotal,subtotal:e.productSubTotal,tax:e.taxTotal,total:e.orderTotal||e.productTotal||0,hasFreeShipping:a}})(t||m),p=(null==t?void 0:t.productItems)||(null==m?void 0:m.productItems);return n.createElement(a.K,{gap:3},s?n.createElement(o.X,{fontSize:"xl",fontWeight:"bold"},d.formatMessage({id:"order_summary.heading.order_summary"})):null,n.createElement(E,{hasEditButton:i,isDropdownOpen:!!t,productItems:p,dropdownText:t?d.formatMessage({id:"checkout_confirmation.message.num_of_items_in_order"},{itemCount:null==p?void 0:p.length}):d.formatMessage({id:"order_summary.cart_items.action.num_of_items_in_cart"},{itemCount:null==p?void 0:p.length})}),n.createElement(Z,{hasPromoCodeForm:c,isEstimate:r,totals:u}))}},9758:(e,t,r)=>{r.d(t,{Z:()=>_});var n=r(9526),a=r(7963),o=r(2215),l=r(8087),s=r(3717),i=r(4071),c=r(4769),m=r(7334),d=r(7234),u=r(7747),p=r(8446),g=r(7536),f=r(9458),h=r(8562),b=r(2735),E=r(1694);const y=e=>{const{form:t,onSubmit:r,isLoading:a}=e,o=(e=>{const{form:{control:t,formState:{errors:r}}}=e;return{promoCode:{name:"promoCode",label:(0,f.Z)().formatMessage({id:"use_promo_code_fields.label.promo_code"}),type:"text",defaultValue:"",error:r.promoCode,control:t}}})({form:t}),l=(0,f.Z)();return n.createElement("form",{noValidate:!0,onSubmit:e=>{t.handleSubmit(r)(e)}},n.createElement(E.Z,o.promoCode,n.createElement(b.x,{w:"unset"},n.createElement(c.z,{borderLeftRadius:0,fontSize:"sm",isLoading:a,minHeight:"full",size:"sm",type:"submit"},l.formatMessage({id:"promo_code_fields.button.apply"})))))},_=e=>{const{align:t="center"}=e,[r,b]=(0,n.useState)(!1),{data:E}=(0,h.Qg)(),_=(0,g.cI)(),v=(0,f.Z)(),x=(0,a.p)(),C=(0,p.useShopperBasketsMutation)("addCouponToBasket");return n.createElement(o.U,{allowToggle:!0},n.createElement(l.Q,{as:s.k,direction:"column",gap:3},n.createElement(i.K,{as:c.z,colorScheme:"clear",fontWeight:"normal",gap:1,justifyContent:t,size:"sm"},v.formatMessage({id:"promocode.accordion.button.have_promocode"}),n.createElement(m.X,{boxSize:5})),n.createElement(d.H,null,n.createElement(u.xu,{bg:"white",border:"1px solid",borderColor:"gray.100",borderRadius:"base",p:3},n.createElement(y,{form:_,isLoading:r,onSubmit:e=>{const{promoCode:t}=e;b(!0),C.mutate({parameters:{basketId:null==E?void 0:E.basketId},body:{code:t}},{onSuccess:()=>{_.reset({promoCode:""}),x({title:v.formatMessage({id:"use_promocode.info.promo_applied"}),status:"success",position:"bottom",isClosable:!0})},onError:()=>{_.setError("promoCode",{type:"manual",message:v.formatMessage({id:"use_promocode.error.check_the_code"})})},onSettled:()=>{b(!1)}})}})))))}},6425:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(9526),a=r(7747),o=r(1293);const l=e=>{const{firstName:t,lastName:r,address1:l,city:s,stateCode:i,postalCode:c,countryCode:m}=e.address;return n.createElement(a.xu,null,n.createElement(o.x,null,t," ",r),n.createElement(o.x,null,l),n.createElement(o.x,null,s,", ",i||null," ",c),n.createElement(o.x,null,m))}},7905:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(9526),a=r(5970),o=r(5418),l=r(6105);const s=e=>{const{name:t,label:r,formLabel:s,error:i,helpText:c,isRequired:m,isDisabled:d,children:u}=e;return n.createElement(a.NI,{id:t,isDisabled:d,isInvalid:!!i,isRequired:m},s||r?s||n.createElement(o.l,null,r):null,u,i?n.createElement(l.J1,null,i.message):null,!i&&c?n.createElement(a.Q6,null,c):null)}},1694:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(7692),a=r(9382),o=r(9526),l=r(2140),s=r(3090),i=r(7536),c=r(7905);const m=["name","type","label","formLabel","helpText","isDisabled","error","rules","fieldHandlerProps","control","defaultValue","children"],d=e=>{const{name:t,type:r,label:d,formLabel:u,helpText:p,isDisabled:g,error:f,rules:h={},fieldHandlerProps:b={},control:E,defaultValue:y,children:_}=e,v=(0,a.Z)(e,m),x=g?{}:h,C=!(null==x||!x.required||g);return o.createElement(c.Z,{name:t,label:d,formLabel:u,error:f,helpText:p,isRequired:C,isDisabled:g},o.createElement(i.Qr,{name:t,control:E,rules:x,defaultValue:y,render:({field:{onChange:e,onBlur:t,value:a,ref:i}})=>{const c="function"==typeof b?b({value:a,onChange:e,onBlur:t}):b;return o.createElement(l.B,null,o.createElement(s.I,(0,n.Z)({ref:i,type:r,onChange:e,onBlur:t},"file"!==r&&{value:a},c,v)),_)}}))}},3478:(e,t,r)=>{r.r(t),r.d(t,{default:()=>L});var n=r(9526),a=r(7239),o=r(9653),l=r(2757),s=r(8446),i=r(9458),c=r(9934),m=r(5305);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,m.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const p={as:"h1",fontSize:"lg",fontWeight:"bold"},g={sectionContainer:{w:{base:"full",lg:"container.md"},bg:"white",boxShadow:"base",mt:2,py:12,px:4,rounded:{base:0,lg:"base"}},section:{width:{base:"full",md:640},alignSelf:"center",maxW:"container.sm",px:{base:1,lg:6},py:6},sectionHeading:p,thankyouHeading:u(u({},p),{},{fontSize:"3xl",fontWeight:"extrabold",py:6,size:"lg",textAlign:"center"})};var f=r(1293),h=r(4769),b=r(8562);const E=({order:e})=>{const t=(0,i.Z)(),r=(0,b.HJ)();return n.createElement(o.K,{spacing:3},n.createElement(o.K,{spacing:3},n.createElement(f.x,{textAlign:"center"},t.formatMessage({id:"checkout_confirmation.label.order_number"},{orderNo:e.orderNo,b:e=>n.createElement("b",null,e)})),n.createElement(f.x,{align:"center"},t.formatMessage({id:"checkout_confirmation.message.will_email_shortly"},{email:e.customerInfo?e.customerInfo.email:"",b:e=>n.createElement("b",null,e)})),n.createElement(h.z,{colorScheme:"secondary",mb:5,variant:"outline",onClick:()=>{r("/")}},t.formatMessage({id:"checkout_confirmation.link.continue_shopping"}))))};var y=r(2338),_=r(7747);const v=e=>{const{heading:t,children:r}=e;return n.createElement(y.W,g.sectionContainer,n.createElement(o.K,{gap:4},n.createElement(_.xu,g.section,n.createElement(o.K,{gap:4},t,r))))};var x=r(5674),C=r(6425);const O=({shipment:e})=>{const t=(0,i.Z)(),{shippingAddress:r,shippingMethod:a}=e;return n.createElement(x.M,{columns:{base:1,lg:2},spacing:6},r?n.createElement(o.K,{spacing:1},n.createElement(l.X,{as:"h3",fontSize:"sm",fontWeight:"bold",lineHeight:"base",mb:1},t.formatMessage({id:"checkout_confirmation.heading.shipping_address"})),n.createElement(C.Z,{address:r})):null,a?n.createElement(o.K,{spacing:1},n.createElement(l.X,{as:"h3",fontSize:"sm",fontWeight:"bold",lineHeight:"base",mb:1},t.formatMessage({id:"checkout_confirmation.heading.shipping_method"})),n.createElement(_.xu,null,n.createElement(f.x,null,a.name),n.createElement(f.x,null,a.description))):null)},M=({shipments:e})=>n.createElement(n.Fragment,null,e.map((e=>n.createElement(O,{key:e.shipmentId,shipment:e})))),k=({shipments:e})=>e?n.createElement(M,{shipments:e}):null;var S=r(9506);const j=({billingAddress:e})=>{const t=(0,i.Z)();return n.createElement(o.K,{spacing:1},n.createElement(l.X,{as:"h3",fontSize:"sm",fontWeight:"bold",lineHeight:"base",mb:1},t.formatMessage({id:"checkout_confirmation.heading.billing_address"})),n.createElement(C.Z,{address:e}))};var w=r(6216),I=r(1889);const Z=({paymentCard:e})=>{var t;const r=(null===(t=e.cardType)||void 0===t?void 0:t.toLowerCase())||"",{numberLastDigits:a,expirationYear:l,expirationMonth:s}=e;return n.createElement(_.xu,null,n.createElement(o.K,{direction:"row"},n.createElement(w.E,{alt:r,src:(0,I.Vh)(`static/img/icons/cc-${r}.svg`),width:"2.375rem"}),n.createElement(f.x,null,r),n.createElement(f.x,null,"••••",a),n.createElement(f.x,null,s,"/",l)))};var P=r(9669);const T=({paymentInstrument:e})=>{const t=(0,i.Z)(),r=e.paymentMethodId===P.LM.creditCard,{paymentMethodId:a,paymentCard:s}=e;return n.createElement(o.K,{spacing:1},n.createElement(l.X,{as:"h3",fontSize:"sm",fontWeight:"bold",lineHeight:"base",mb:1},r?t.formatMessage({id:"checkout_confirmation.heading.credit_card"}):a),r&&s?n.createElement(Z,{paymentCard:s}):null)},D=e=>{const{billingAddress:t,paymentInstruments:r}=e;return n.createElement(x.M,{columns:{base:1,lg:2},spacing:6},t?n.createElement(j,{billingAddress:t}):null,r?r.map((e=>n.createElement(T,{key:e.paymentMethodId,paymentInstrument:e}))):null)};var z=r(2181),A=r(848);const H=()=>{var e;const t=(0,i.Z)(),{orderNo:r}=(0,c.UO)(),{data:m}=(0,s.useOrder)({parameters:{orderNo:r}},{enabled:!!r&&!A.sk});return m?n.createElement(a.M,null,n.createElement(z.Z,{title:"Checkout confirmation page title",description:m.customerInfo?`We will send an email to ${null==m||null===(e=m.customerInfo)||void 0===e?void 0:e.email} with your confirmation number and receipt shortly.`:""}),n.createElement(o.K,{alignItems:"center",mx:{base:-3,lg:0},w:"container.md"},n.createElement(v,{heading:n.createElement(l.X,g.thankyouHeading,t.formatMessage({id:"checkout_confirmation.heading.thank_you_for_order"}))},n.createElement(E,{order:m})),n.createElement(v,{heading:n.createElement(l.X,g.sectionHeading,t.formatMessage({id:"checkout_confirmation.heading.delivery_details"}))},n.createElement(k,{shipments:m.shipments})),n.createElement(v,{heading:n.createElement(l.X,g.sectionHeading,t.formatMessage({id:"order_summary.heading.order_summary"}))},n.createElement(S.Z,{hasEditCartButton:!1,hasHeading:!1,order:m})),n.createElement(v,{heading:n.createElement(l.X,g.sectionHeading,t.formatMessage({id:"checkout_confirmation.heading.payment_details"}))},n.createElement(D,{billingAddress:m.billingAddress,paymentInstruments:m.paymentInstruments})))):null};H.getTemplateName=()=>"order-confirmation";const L=H}}]);